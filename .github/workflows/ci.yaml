name: API CI
ins
on:
   push:
    branches: [main, develop]
  pull_request:
      branches: [main, develop]

jobs:

  testing:
      runs-on: ubuntu-latest

      env:
        GO_VERSION: 1.16

      steps: 
          - name: Checkout repo 
          - uses: action/checkout@v4  
        
          - name: Set up Go ${{ env.GO_VERSION }}
            uses: action/setup-go@v4 
              with: 
                  go-versio: ${{ env.GO_VERSION }}

          - name: Install Dependencies 
          - run: go mod download

          - name: Run unit and integrate tests
          - run: go test -v

          - name: Run build
          - run: go build -v

          - name: CI Succces
          if: succes()
          uses: rtCamp/action-slack-notify@v2
          with:
            status: 'passed'
            text: 'Go CI succces'
          env:
            SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
